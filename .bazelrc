build --enable_platform_specific_config
build --toolchain_resolution_debug=.*

# System default toolchain
build --compiler=gcc
build --crosstool_top=@bazel_tools//tools/cpp:toolchain
build --host_crosstool_top=@bazel_tools//tools/cpp:toolchain

# Custom toolchain
build:clang_toolchain --crosstool_top=//cc_toolchain:clang_suite
build:clang_toolchain --host_crosstool_top=@bazel_tools//tools/cpp:toolchain

# Linux aarch64
build:linux_aarch64 --cpu=aarch64
build:linux_aarch64 --host_platform=//config:linux_aarch64_platform

build:linux_aarch64_clang --config=clang_toolchain
build:linux_aarch64_clang --config=linux_aarch64
build:linux_aarch64_clang --compiler=linux_clang

build:linux_aarch64_clang_sysroot --config=clang_toolchain
build:linux_aarch64_clang_sysroot --config=linux_aarch64
build:linux_aarch64_clang_sysroot --compiler=linux_clang_sysroot

# Linux 86_64
build:linux_x86_64 --cpu=x86_64
build:linux_x86_64 --host_platform=//config:linux_x86_64_platform

build:linux_x86_64_clang --config=clang_toolchain
build:linux_x86_64_clang --config=linux_x86_64
build:linux_x86_64_clang --compiler=linux_clang

build:linux_x86_64_clang_sysroot --config=clang_toolchain
build:linux_x86_64_clang_sysroot --config=linux_x86_64
build:linux_x86_64_clang_sysroot --compiler=linux_clang_sysroot

##########
# Tests
# Non hermetic
test --crosstool_top=@bazel_tools//tools/cpp:toolchain
test --host_crosstool_top=@bazel_tools//tools/cpp:toolchain

# Hermetic
test:hermetic --crosstool_top=//cc_toolchain:clang_suite
test:hermetic --host_crosstool_top=@bazel_tools//tools/cpp:toolchain
test:hermetic --compiler=linux_clang

# aarch64
test:aarch64 --config=hermetic
test:aarch64 --cpu=aarch64                  # Use --cpu as a differentiator for cc_toolchain_suite.
test:aarch64 --host_platform=//config:linux_aarch64_platform

# x86_64
test:x86_64 --config=hermetic
test:x86_64 --cpu=x86_64                  # Use --cpu as a differentiator for cc_toolchain_suite.
test:x86_64 --host_platform=//config:linux_x86_64_platform